(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[function(e,t,s){"use strict";s.r(t);s(1);var i=class{constructor(e){if(!e)throw Error("Repository key is required");this.key=e,this.items=[]}add(e){this.items=[e,...this.items],this.syncStorage()}delete(e){this.items=this.items.filter(t=>t.id!==e),this.syncStorage()}find(e){for(let t=0;t<this.items.length;){if(this.items[t].id===e)return this.items[t];t+=1}return null}findAll(){return this.items}indexOf(e){for(let t=0;t<this.items.length;)if(this.items[t].id===e)return t;return-1}get maxId(){return 0===this.items.length?0:Math.max(...this.items.map(e=>e.id))}syncStorage(){if(!window.localStorage)return;const e=this.items.map(e=>e.asJsonSerializable());localStorage.setItem(this.key,JSON.stringify(e))}};class r{constructor(e,t,s){if(!t)throw Error("Invalid id");if(!s)throw Error("Invalid project name");this.createdOn=e||new Date,this.id=t,this.name=s.trim()}asJsonSerializable(){return{createdOn:this.createdOn,id:this.id,name:this.name}}get isDefault(){return"Default"===this.name}static parse(e,t="JSON"){switch(t){case"JSON":{const{createdOn:t,id:s,name:i}=e;return new r(t,s,i)}default:throw Error("Unsupported format for parsing")}}}var n=r;var a=class extends i{constructor(e){super(e);const t=localStorage.getItem(e);if(!t){const e=this.maxId+1;return void this.add(new n(new Date,e,"Default"))}const s=JSON.parse(t);this.items=s.map(e=>n.parse(e))}static get KEY(){return"JUBEI-TODO-APP-PROJECTS-REPOSITORY"}update(e,t){const{index:s}=this.indexOf(e);if(-1===s)return;const{name:i}=t;i&&(this.items[s].name=i)}};var o=class extends i{constructor(e){super(e),localStorage.getItem(e)||localStorage.setItem(e,JSON.stringify([]))}static get KEY(){return"JUBEI-TODO-APP-TODOS-REPOSITORY"}update(e,t){const{index:s}=this.indexOf(e);if(-1===s)return;const{description:i,dueDate:r,priority:n,title:a}=t;i&&(this.items[s].description=i),r&&(this.items[s].dueDate=r),n&&(this.items[s].priority=n),a&&(this.items[s].title=a)}};var c=(()=>{let e,t;return{projectsRepository:(e||(e=new a(a.KEY)),e),todosRepository:(t||(t=new o(o.KEY)),t)}})();var d=(()=>{const e=document.querySelector("#projects-nav"),t=e.querySelector("#addProjectForm"),s=e.querySelector("form"),i=e=>{["text-danger","text-success"].forEach(t=>e.classList.remove(t)),e.innerHTML=""};const r=(e,t,s="success")=>{switch(s){case"error":e.classList.add("text-danger"),e.classList.remove("text-success");break;default:e.classList.add("text-success"),e.classList.remove("text-danger")}e.innerHTML=`${t}`},a=e=>{e.preventDefault();const{localName:t,parentNode:s}=e.target,{id:i}="i"===t?s.dataset:e.target.dataset,r="i"===t?s.parentNode:s;c.projectsRepository.delete(+i),r.parentNode.removeChild(r)};s.clearForm=function(){const e=this.querySelector("span"),t=this.querySelector("input");return i(e),t.value="",this}.bind(s),t.thenHideForm=function(){return this.classList.add("collapse"),this.classList.remove("show"),this}.bind(t);const o=e=>{const t=document.createElement("span");let s;t.innerText=e.name,e.isDefault||(s=document.createElement("button"),s.classList.add("btn","p-2","btn-delete"),s.innerHTML='<i class="fa fa-trash fa-fw" aria-hidden="true"></i>',s.setAttribute("data-id",e.id),s.addEventListener("click",a));const i=document.createElement("li");return i.appendChild(t),e.isDefault||i.appendChild(s),i.classList.add("bg-white","font-weight-lighter","my-2","p-2","rounded","shadow-lg","project"),i};s.addEventListener("submit",a=>{a.preventDefault();const{value:d}=s.querySelector("#name"),l=s.querySelector("span");i(l);try{const i=c.projectsRepository.maxId+1,a=new n(new Date,i,d);r(l,"Project created"),c.projectsRepository.add(a);const u=e.querySelector("ul");if(u.hasChildNodes()){const{firstChild:e}=u;u.insertBefore(o(a),e)}else u.appendChild(o(a));setTimeout(()=>{s.clearForm(),t.thenHideForm()},1e3)}catch({message:e}){r(l,e,"error")}});return{initialize:()=>{const t=c.projectsRepository.findAll().map(o),s=document.createElement("ul");s.classList.add("list-unstyled"),e.appendChild(s),t.forEach((e,t)=>setTimeout(()=>{s.appendChild(e)},200*(t+1)))}}})();const l={initialize:()=>{d.initialize()}};document.addEventListener("DOMContentLoaded",()=>{l.initialize()})},function(e,t){}],[[0,2,1]]]);