(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[function(e,t,s){"use strict";s.r(t);s(1);var r=class{constructor(e){if(!e)throw Error("Repository key is required");this.key=e,this.items=[]}add(e){this.items=[e,...this.items],this.syncStorage()}delete(e){this.items=this.items.filter(t=>t.id!==e),this.syncStorage()}find(e){for(let t=0;t<this.items.length;){if(this.items[t].id===e)return this.items[t];t+=1}return null}findAll(){return this.items}indexOf(e){for(let t=0;t<this.items.length;)if(this.items[t].id===e)return t;return-1}get maxId(){return 0===this.items.length?0:Math.max(...this.items.map(e=>e.id))}syncStorage(){if(!window.localStorage)return;const e=this.items.map(e=>e.asJsonSerializable());localStorage.setItem(this.key,JSON.stringify(e))}};class i{constructor(e,t,s){if(!t)throw Error("Invalid id");if(!s)throw Error("Invalid project name");this.createdOn=e||new Date,this.id=t,this.name=s.trim()}asJsonSerializable(){return{createdOn:this.createdOn,id:this.id,name:this.name}}get isDefault(){return"Default"===this.name}static parse(e,t="JSON"){switch(t){case"JSON":{const{createdOn:t,id:s,name:r}=e;return new i(t,s,r)}default:throw Error("Unsupported format for parsing")}}}var n=i;var a=class extends r{constructor(e){super(e);const t=localStorage.getItem(e);if(!t){const e=this.maxId+1;return void this.add(new n(new Date,e,"Default"))}const s=JSON.parse(t);this.items=s.map(e=>n.parse(e))}static get KEY(){return"JUBEI-TODO-APP-PROJECTS-REPOSITORY"}update(e,t){const{index:s}=this.indexOf(e);if(-1===s)return;const{name:r}=t;r&&(this.items[s].name=r)}};var o={URGENT:"Urgent",HIGH:"High",MEDIUM:"Medium",LOW:"Low"};class c{constructor(e,t,s,r,i,n){if(!i)throw Error("Invalid Project");if(!n)throw Error("Invalid title");this.createdOn=new Date,this.description=e||null,this.dueDate=t||null,this.id=s,this.priority=r||o.LOW,this.projectId=i,this.title=n}asJsonSerializable(){return{createdOn:this.createdOn,description:this.description,dueDate:this.dueDate,id:this.id,priority:this.priority,projectId:this.projectId,title:this.title}}static parse(e,t="JSON"){switch(t){case"JSON":{const{createdOn:t,description:s,dueDate:r,id:i,priority:n,projectId:a,title:o}=e;return new c(t,s,r,i,n,a,o)}default:throw Error("Unsupported format for parsing")}}}var d=c;var l=class extends r{constructor(e){super(e);const t=localStorage.getItem(e);if(!t)return void localStorage.setItem(e,JSON.stringify([]));const s=JSON.parse(t);this.items=s.map(e=>d.parse(e))}static get KEY(){return"JUBEI-TODO-APP-TODOS-REPOSITORY"}update(e,t){const{index:s}=this.indexOf(e);if(-1===s)return;const{description:r,dueDate:i,priority:n,title:a}=t;r&&(this.items[s].description=r),i&&(this.items[s].dueDate=i),n&&(this.items[s].priority=n),a&&(this.items[s].title=a)}};var u=(()=>{let e,t;return{projectsRepository:(e||(e=new a(a.KEY)),e),todosRepository:(t||(t=new l(l.KEY)),t)}})();var m=(()=>{const e=document.querySelector("#projects-nav"),t=e.querySelector("#addProjectForm"),s=e.querySelector("form"),r=e=>{["text-danger","text-success"].forEach(t=>e.classList.remove(t)),e.innerHTML=""};const i=(e,t,s="success")=>{switch(s){case"error":e.classList.add("text-danger"),e.classList.remove("text-success");break;default:e.classList.add("text-success"),e.classList.remove("text-danger")}e.innerHTML=`${t}`},a=e=>{e.preventDefault();const{localName:t,parentNode:s}=e.target,{id:r}="i"===t?s.dataset:e.target.dataset,i="i"===t?s.parentNode:s;u.projectsRepository.delete(+r),i.parentNode.removeChild(i)};s.clearForm=function(){const e=this.querySelector("span"),t=this.querySelector("input");return r(e),t.value="",this}.bind(s),t.thenHideForm=function(){return this.classList.add("collapse"),this.classList.remove("show"),this}.bind(t);const o=e=>{const t=document.createElement("span");let s;t.innerText=e.name,e.isDefault||(s=document.createElement("button"),s.classList.add("btn","p-2","btn-delete"),s.innerHTML='<i class="fa fa-trash fa-fw" aria-hidden="true"></i>',s.setAttribute("data-id",e.id),s.addEventListener("click",a));const r=document.createElement("li");return r.appendChild(t),e.isDefault||r.appendChild(s),r.classList.add("bg-white","font-weight-lighter","my-2","p-2","rounded","shadow-lg","project"),r};s.addEventListener("submit",a=>{a.preventDefault();const{value:c}=s.querySelector("#name"),d=s.querySelector("span");r(d);try{const r=u.projectsRepository.maxId+1,a=new n(new Date,r,c);i(d,"Project created"),u.projectsRepository.add(a);const l=e.querySelector("ul");if(l.hasChildNodes()){const{firstChild:e}=l;l.insertBefore(o(a),e)}else l.appendChild(o(a));setTimeout(()=>{s.clearForm(),t.thenHideForm()},1e3)}catch({message:e}){i(d,e,"error")}});return{initialize:()=>{const t=u.projectsRepository.findAll().map(o),s=document.createElement("ul");s.classList.add("list-unstyled"),e.appendChild(s),t.forEach((e,t)=>setTimeout(()=>{s.appendChild(e)},200*(t+1)))}}})();const p=e=>{const{classes:t,text:s}=e,r=document.createElement("button");return t&&t.length>0&&r.classList.add(...t),r.innerText=s,r},h=e=>{const{classes:t,id:s,placeholder:r,type:i,value:n}=e,a=["form-control","my-2"],o=document.createElement("input");return t&&t.length>0&&a.push(...t),o.classList.add(...a),o.setAttribute("id",s),o.setAttribute("type",i),o.setAttribute("placeholder",r||""),o.value=n||"",o},f=e=>{const{classes:t,id:s,items:r,selected:i}=e,n=["form-control","my-2"];t&&0!==t.length&&n.push(...t);const a=document.createElement("select");return a.classList.add(...n),a.setAttribute("id",s),((e,t="value")=>e&&0===e.length?e:e.sort((e,s)=>{const[r,i]=[e,s].map(e=>e[t].toString());return r<i?-1:r>i?1:0}))(r,"value").forEach(e=>{const{id:t,value:s}=e,r=document.createElement("option");r.text=s,r.value=t,r.value===i&&(r.selected=!0),a.appendChild(r)}),a},y=()=>{const e=document.createElement("form");e.classList.add("pb-5"),e.setAttribute("method","post");const t=(e=>{const t=document.createElement("h6");return t.style.fontWeight="bold",t.innerText=e,t})("Add Todo"),s=h({id:"title",type:"text",placeholder:"Title"}),r=h({id:"description",type:"text",placeholder:"Description"}),i=h({id:"dueDate",type:"date"}),n=u.projectsRepository.findAll().map(e=>({id:e.id,value:e.name})),a=f({id:"projectId",items:n}),c=Object.getOwnPropertyNames(o).map(e=>({id:o[e],value:o[e]})),d=f({id:"priority",items:c}),l=document.createElement("div");l.classList.add("col-12");const m=document.createElement("div");m.classList.add("row");const y=p({classes:["btn","btn-primary","btn-sm","col-5"],text:"Save"}),g=p({classes:["btn","btn-secondary","btn-sm","offset-2","col-5"],text:"Cancel"});return m.append(y,g),l.append(m),e.append(t,s,r,a,i,d,l),e};function g(){const[e,t]=[this.querySelectorAll("input"),this.querySelectorAll("select")];e.forEach(e=>{e.value=""}),t.forEach(e=>{const{id:t}=e;e.value="priority"===t?o.HIGH:1})}function v(e){const t=this,s=Object.create({});return e.forEach(e=>{s[e]=t.querySelector(`#${e}`).value}),s}var E=(()=>{const e=document.querySelector("#key"),t=new Map;t.set(4,{className:"danger",name:o.URGENT}),t.set(3,{className:"primary",name:o.HIGH}),t.set(2,{className:"warning",name:o.MEDIUM}),t.set(1,{className:"success",name:o.LOW});const s=e=>{const{className:s,name:r}=t.get(e),i=document.createElement("span");i.classList.add("badge","badge-light","mr-2"),i.innerText=e;const n=document.createElement("span");n.innerText=r;const a=document.createElement("button");return a.classList.add("btn","btn-block","btn-sm",`btn-${s}`,"font-weight-bold","my-2","text-left"),a.append(i,n),a};return{initialize:()=>{const r=[...t.keys()].sort((e,t)=>t-e).map(s),i=y();i.clearFormFields=g.bind(i),i.queryFormValuesByName=v.bind(i),i.addEventListener("submit",e=>{e.preventDefault();const t=e.target.queryFormValuesByName(["description","dueDate","priority","projectId","title"]),{description:s,dueDate:r,priority:n,projectId:a,title:o}=t;try{const e=u.todosRepository.maxId+1,t=new d(s,r,e,n,+a,o);u.todosRepository.add(t),i.clearFormFields()}catch({message:e}){alert(e)}}),e.append(i,...r)}}})();const b={initialize:()=>{m.initialize(),E.initialize()}};document.addEventListener("DOMContentLoaded",()=>{b.initialize()})},function(e,t){}],[[0,2,1]]]);